<!DOCTYPE html>
<html>
<head>
  <title>Barcode Scanner</title>
  <script src="https://cdn.jsdelivr.net/npm/scandit-sdk@6.x/build/scandit-sdk.min.js"></script>
</head>
<body>
  <h2>Scan a barcode</h2>
  <div id="scanner"></div>
  <p id="status">Waiting to scan...</p>

  <script>
    const POWER_AUTOMATE_URL = "https://prod-25.canadacentral.logic.azure.com:443/workflows/ab1985337bb94d1798ceacdef4a727be/triggers/manual/paths/invoke?api-version=2016-06-01"; // Replace with your URL

    ScanditSDK.configure("AoUlUgFdJzC6JurcYecA9q08XVOgArB95RblfYUiFRjxEEZWzzKlVQxxUfJ5UQpHnm6zIYI7nyH8eCDPEU8hvLM13MeBf8ae23omjG4XjB98JlyeAg/Cs34rH2R/Qu3ZPFputI9twxBSJ8v8hUUSc8hH2MJhRLTJ7Wrig1Rglq7KdPyRY2myxg1ISNz4cB7hTWdKDMR0+hiPcVVa/kA34d9TTt34cUsD72K2RSNIAdYtRmcYUGc5QDta8dglXD6w4WXDUnhpcFYiSjl2jFjL0G5qQc+8blRbwhYYWhtbpRnGZsWpek7zi1h8U/rka2uI1lX3T6NrpY+9cjgQQVdBqqVFMVVlNhgRYnBXWOQUhdDudNhi+1M8RUNc71nfN4WAtX3x4Jok6Y2QSVeNEg5tSwcVfbScS42rlkxEaO8t3lKPWSXZ6Fi3sytvsEqpYiVYQHi4q7JT45YWTTKwQg+L27QSg9/QajeTI34Ht+J2Wj5HfVcbkTU3sQV4pcSSZUO/jGfYnNpNGFjaJwawqgLnttQmAFukznNerG2M2YISmHxEaML/sFz3o9ynkrSxF1oVJnU9FIaq2JxuMRmlocOL45+Aa4MjZcF7XgoHIwgEL3dDAG3KvAMv4lEC3zjdn7FPUA0YCuEassqFPFSin81OPiCgGeouSutE3jf0Yqj8q81dq1dojg5Hpm8ccn2ucb56pMHUwKRQ5w88nUQLEqK8pn+BlQkGKcImTUMbFgJUovF8Yc/YTugjW/JP84faVbi9yiayMfP1OrogNDedfjHJy3IDVeMzx5UAQiIoBKzEw7BPsG57Dx67P5lDYleOoInsnZUkTAtQDvyNcCLgYnAHiPk8vq1hTifFCQBFPDnl2PcdDHcHcA5a+kOqxtzdBWMcRkmvTPvfRdPZ2NxmPVG8QbnodKai084T1l3crPrNOBfTaL8txOi4tSZc9Cd94UYkycrZ3yja1lfO9g/rWeBgz7Gk627Y8Cunta3RhXUeaRebLV1yBI1Tfd/fA43SkK+HdZAelmd2xw627qa+BUFB+YkJ0PFnmg0VHx8/XQWsSCMOMxN+rC6N6s0gMyyRvvPsJ0sWSO3TdMbb22EBHEB4KBT/SkG1IcSC4J3dMZvtwxvE68QeZfiAAzdb93Anor4AGbDcbCHcVWMXX1q9vo9EjrC4M80bqFK/Pb1aw/FnK+8Nwr+hSsQ4+6WIL4Z3NlXIq+w=", {
      engineLocation: "https://cdn.jsdelivr.net/npm/scandit-sdk@6.x/build/",
    }).then(() => {
      return ScanditSDK.BarcodePicker.create(document.getElementById("scanner"), {
        playSoundOnScan: true,
        vibrateOnScan: true
      });
    }).then(barcodePicker => {
      barcodePicker.onScan(scanResult => {
        const barcode = scanResult.barcodes[0].data;
        document.getElementById("status").textContent = "Scanned: " + barcode;

        fetch(POWER_AUTOMATE_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            barcode: barcode,
            scannedBy: "Device A",
            scanTime: new Date().toISOString()
          })
        }).then(res => {
          if (res.ok) {
            document.getElementById("status").textContent = "Scan sent to SharePoint!";
          } else {
            document.getElementById("status").textContent = "Failed to send.";
          }
        });
      });
    });
  </script>
</body>
</html>
